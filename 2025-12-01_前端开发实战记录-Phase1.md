# 前端开发实战记录 - Phase 1：环境搭建与基础配置

日期：2025年12月01日
项目名称：hospital-cms (治疗效果记录管理平台)
技术栈：Vue 3 + TypeScript + Vite + Element Plus + Pinia + Axios

## 1. 🚀 操作步骤记录

### 1.1 初始化项目

使用 Vite 脚手架快速生成 Vue 3 + TypeScript 项目模板。
```bash
# 在目标目录下创建项目
npm create vite@latest hospital-cms -- --template vue-ts
```

### 1.2 安装核心依赖

安装项目所需的 UI 库、路由、状态管理和网络请求库。
```bash
cd hospital-cms
npm install element-plus axios pinia vue-router
```

### 1.3 基础文件配置

*   `src/router/index.ts`：创建了基础路由文件，暂时指向登录页。
*   `src/main.ts`：在入口文件中挂载了 Element Plus、Pinia 和 Router。

### 1.4 🧪 核心任务：Axios 封装 (src/utils/request.ts)

为了统一处理前后端交互，封装了 Axios 实例：

*   `BaseURL`：配置为 `http://localhost:1337/api` (Strapi 后端地址)。
*   **请求拦截器**：自动从 `localStorage` 读取 JWT Token 并加入 Header (`Authorization: Bearer <token>`)。
*   **响应拦截器**：全局处理错误，特别是 `401 Unauthorized` 状态下自动清除缓存并跳转回登录页。

## 2. 🐛 遇到的问题与解决方案 (Troubleshooting)

在配置过程中遇到了 3 个主要错误，均已解决。

### 🔴 问题一：找不到路由模块

报错信息：
```
找不到模块“../router”或其相应的类型声明。ts(2307)
```
原因分析： TypeScript 在解析模块路径时，没有自动识别出文件夹下的 `index.ts` 文件，或者 VS Code 的 TS 服务未及时更新。

✅ 解决方案： 在引入时显式指定文件名：
```typescript
// 修改前
import router from '../router'

// 修改后 (显式指向 index)
import router from '../router/index'
```

### 🔴 问题二：Axios 类型导入错误

报错信息：
```
“AxiosInstance”是一种类型，必须在启用 "verbatimModuleSyntax" 时使用仅类型导入进行导入。ts(1484)
```
原因分析： Vite 默认开启了 `verbatimModuleSyntax` 规则。TypeScript 要求在导入“纯类型”（在编译后会被删除的代码）时，必须使用 `import type` 语法，而 axios 是实体对象，不能混在一起导入。

✅ 解决方案： 将导入语句拆分为“实体导入”和“类型导入”：
```typescript
// 修改前
import axios, { AxiosInstance, ... } from 'axios'

// 修改后
import axios from 'axios' // 导入功能
import type { AxiosInstance, AxiosError, ... } from 'axios' // 导入类型定义
```

### 🔴 问题三：无法启动项目 (ENOENT)

报错信息：
```
npm error code ENOENT Could not read package.json
```
原因分析： 在执行 `npm run dev` 时，当前所在的目录是项目的父级文件夹，而不是项目文件夹本身。npm 找不到 `package.json` 配置文件。

✅ 解决方案： 进入项目文件夹后再运行命令：
```bash
# 查看当前目录下的文件夹
dir 

# 进入项目文件夹
cd hospital-cms 

# 再次安装依赖（保险起见）并启动
npm install
npm run dev
```

## 3. 🎉 阶段成果

*   ✅ Node.js 环境验证通过。
*   ✅ Vue 3 项目骨架搭建完成。
*   ✅ 核心依赖库安装完毕。
*   ✅ Axios 网络请求层封装完毕（含 Token 拦截逻辑）。
*   ✅ 项目成功启动在 `http://localhost:5173`。
